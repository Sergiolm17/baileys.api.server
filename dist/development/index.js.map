{"version":3,"file":"index.js","names":["exitHandler","server","close","logger","info","process","exit","unexpectedErrorHandler","error","on"],"sources":["../../node/index.js"],"sourcesContent":["import { server } from './express';\nimport { logger } from './util/logger';\n\nconst exitHandler = () => {\n  if (server) {\n    server.close(() => {\n      logger.info('Server closed');\n      process.exit(1);\n    });\n  } else {\n    process.exit(1);\n  }\n};\nconst unexpectedErrorHandler = error => {\n  logger.error(error);\n  exitHandler();\n};\nprocess.on('uncaughtException', unexpectedErrorHandler);\nprocess.on('unhandledRejection', unexpectedErrorHandler);\nprocess.on('SIGTERM', () => {\n  logger.info('SIGTERM received');\n  if (server) {\n    server.close();\n  }\n});\n"],"mappings":"aAAA;AACA;;AAEA,MAAMA,WAAW,GAAG,MAAM;EACxB,IAAIC,eAAJ,EAAY;IACVA,eAAA,CAAOC,KAAP,CAAa,MAAM;MACjBC,cAAA,CAAOC,IAAP,CAAY,eAAZ;MACAC,OAAO,CAACC,IAAR,CAAa,CAAb;IACD,CAHD;EAID,CALD,MAKO;IACLD,OAAO,CAACC,IAAR,CAAa,CAAb;EACD;AACF,CATD;AAUA,MAAMC,sBAAsB,GAAG,CAAAC,KAAK,KAAI;EACtCL,cAAA,CAAOK,KAAP,CAAaA,KAAb;EACAR,WAAW;AACZ,CAHD;AAIAK,OAAO,CAACI,EAAR,CAAW,mBAAX,EAAgCF,sBAAhC;AACAF,OAAO,CAACI,EAAR,CAAW,oBAAX,EAAiCF,sBAAjC;AACAF,OAAO,CAACI,EAAR,CAAW,SAAX,EAAsB,MAAM;EAC1BN,cAAA,CAAOC,IAAP,CAAY,kBAAZ;EACA,IAAIH,eAAJ,EAAY;IACVA,eAAA,CAAOC,KAAP;EACD;AACF,CALD"}