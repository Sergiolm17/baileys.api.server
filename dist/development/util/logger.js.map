{"version":3,"file":"logger.js","names":["stream","PinoPretty","colorize","config","logColorize","messageFormat","logMessageFormat","translateTime","logTranslateTime","logger","pino","timestamp","date","Date","getTime","getTimezoneOffset","toJSON","name","applicationName","level","logLevel","logPretty","undefined","expresslogger","pinoHttp","serializers","req","body","raw"],"sources":["../../../node/util/logger.js"],"sourcesContent":["import { pino } from 'pino';\nimport { pinoHttp } from 'pino-http';\nimport PinoPretty from 'pino-pretty';\nimport config from '../config';\n\nconst stream = PinoPretty({\n  colorize: config.logColorize,\n  messageFormat: config.logMessageFormat,\n  translateTime: config.logTranslateTime,\n});\nexport const logger = pino(\n  {\n    timestamp: () => {\n      const date = new Date();\n      return `,\"time\":\"${new Date(date.getTime() - date.getTimezoneOffset() * 60000).toJSON()}\"`;\n    },\n    name: config.applicationName,\n    level: config.logLevel,\n  },\n  config.logPretty ? stream : undefined,\n);\n\nexport function expresslogger() {\n  return pinoHttp({\n    logger: logger,\n    serializers: {\n      req(req) {\n        req.body = req.raw.body;\n        return req;\n      },\n    },\n  });\n}\n"],"mappings":"8NAAA;AACA;AACA;AACA;;AAEA,MAAMA,MAAM,GAAG,IAAAC,mBAAA,EAAW;EACxBC,QAAQ,EAAEC,eAAA,CAAOC,WADO;EAExBC,aAAa,EAAEF,eAAA,CAAOG,gBAFE;EAGxBC,aAAa,EAAEJ,eAAA,CAAOK,gBAHE,EAAX,CAAf;;AAKO,MAAMC,MAAM,GAAG,IAAAC,UAAA;AACpB;EACEC,SAAS,EAAE,MAAM;IACf,MAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;IACA,OAAQ,YAAW,IAAIA,IAAJ,CAASD,IAAI,CAACE,OAAL,KAAiBF,IAAI,CAACG,iBAAL,KAA2B,KAArD,EAA4DC,MAA5D,EAAqE,GAAxF;EACD,CAJH;EAKEC,IAAI,EAAEd,eAAA,CAAOe,eALf;EAMEC,KAAK,EAAEhB,eAAA,CAAOiB,QANhB,EADoB;;AASpBjB,eAAA,CAAOkB,SAAP,GAAmBrB,MAAnB,GAA4BsB,SATR,CAAf,C;;;AAYA,SAASC,aAAT,GAAyB;EAC9B,OAAO,IAAAC,kBAAA,EAAS;IACdf,MAAM,EAAEA,MADM;IAEdgB,WAAW,EAAE;MACXC,GAAG,CAACA,GAAD,EAAM;QACPA,GAAG,CAACC,IAAJ,GAAWD,GAAG,CAACE,GAAJ,CAAQD,IAAnB;QACA,OAAOD,GAAP;MACD,CAJU,EAFC,EAAT,CAAP;;;AASD"}